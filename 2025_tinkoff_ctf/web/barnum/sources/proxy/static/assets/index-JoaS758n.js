import{r as xt,g as ht,u as pt,i as h,j as e,a as s,B as i,C as B,P as F,T as a,b as O,I as W,F as le,A as Fe,c as L,S as gt,d as A,e as ft,G as y,f as Ie,h as Be,k as Re,L as te,l as re,m as oe,n as U,o as ae,D as mt,p as bt,q as vt,s as G,M as jt,t as Pe,R as yt}from"./vendor-C8vfU4QZ.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))x(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&x(d)}).observe(document,{childList:!0,subtree:!0});function C(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function x(n){if(n.ep)return;n.ep=!0;const l=C(n);fetch(n.href,l)}})();var ie={},ze=xt;ie.createRoot=ze.createRoot,ie.hydrateRoot=ze.hydrateRoot;var ce={},se={};const Ct=ht(pt);var Ae;function p(){return Ae||(Ae=1,function(g){"use client";Object.defineProperty(g,"__esModule",{value:!0}),Object.defineProperty(g,"default",{enumerable:!0,get:function(){return u.createSvgIcon}});var u=Ct}(se)),se}var St=h;Object.defineProperty(ce,"__esModule",{value:!0});var K=ce.default=void 0,_t=St(p()),wt=e;K=ce.default=(0,_t.default)((0,wt.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");var de={},Mt=h;Object.defineProperty(de,"__esModule",{value:!0});var He=de.default=void 0,kt=Mt(p()),$t=e;He=de.default=(0,kt.default)((0,$t.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var ue={},Et=h;Object.defineProperty(ue,"__esModule",{value:!0});var Oe=ue.default=void 0,Dt=Et(p()),It=e;Oe=ue.default=(0,Dt.default)((0,It.jsx)("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"}),"Timer");var xe={},Bt=h;Object.defineProperty(xe,"__esModule",{value:!0});var We=xe.default=void 0,Rt=Bt(p()),Pt=e;We=xe.default=(0,Rt.default)((0,Pt.jsx)("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"}),"AutoAwesome");var he={},zt=h;Object.defineProperty(he,"__esModule",{value:!0});var X=he.default=void 0,At=zt(p()),T=e;X=he.default=(0,At.default)([(0,T.jsx)("circle",{cx:"4.5",cy:"9.5",r:"2.5"},"0"),(0,T.jsx)("circle",{cx:"9",cy:"5.5",r:"2.5"},"1"),(0,T.jsx)("circle",{cx:"15",cy:"5.5",r:"2.5"},"2"),(0,T.jsx)("circle",{cx:"19.5",cy:"9.5",r:"2.5"},"3"),(0,T.jsx)("path",{d:"M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8"},"4")],"Pets");var pe={},Lt=h;Object.defineProperty(pe,"__esModule",{value:!0});var ge=pe.default=void 0,Ft=Lt(p()),Ht=e;ge=pe.default=(0,Ft.default)((0,Ht.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h5v-2H4v-6h18V6c0-1.11-.89-2-2-2m0 4H4V6h16zm-5.07 11.17-2.83-2.83-1.41 1.41L14.93 22 22 14.93l-1.41-1.41z"}),"CreditScore");var fe={},Ot=h;Object.defineProperty(fe,"__esModule",{value:!0});var Te=fe.default=void 0,Wt=Ot(p()),Tt=e;Te=fe.default=(0,Wt.default)((0,Tt.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer");var me={},Vt=h;Object.defineProperty(me,"__esModule",{value:!0});var be=me.default=void 0,qt=Vt(p()),Nt=e;be=me.default=(0,qt.default)((0,Nt.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m3.3 14.71L11 12.41V7h2v4.59l3.71 3.71z"}),"AccessTimeFilled");var ve={},Yt=h;Object.defineProperty(ve,"__esModule",{value:!0});var Ve=ve.default=void 0,Gt=Yt(p()),Ut=e;Ve=ve.default=(0,Gt.default)((0,Ut.jsx)("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"}),"School");var je={},Kt=h;Object.defineProperty(je,"__esModule",{value:!0});var qe=je.default=void 0,Xt=Kt(p()),Jt=e;qe=je.default=(0,Xt.default)((0,Jt.jsx)("path",{d:"M12 6c1.11 0 2-.9 2-2 0-.38-.1-.73-.29-1.03L12 0l-1.71 2.97c-.19.3-.29.65-.29 1.03 0 1.1.9 2 2 2m4.6 9.99-1.07-1.07-1.08 1.07c-1.3 1.3-3.58 1.31-4.89 0l-1.07-1.07-1.09 1.07C6.75 16.64 5.88 17 4.96 17c-.73 0-1.4-.23-1.96-.61V21c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-4.61c-.56.38-1.23.61-1.96.61-.92 0-1.79-.36-2.44-1.01M18 9h-5V7h-2v2H6c-1.66 0-3 1.34-3 3v1.54c0 1.08.88 1.96 1.96 1.96.52 0 1.02-.2 1.38-.57l2.14-2.13 2.13 2.13c.74.74 2.03.74 2.77 0l2.14-2.13 2.13 2.13c.37.37.86.57 1.38.57 1.08 0 1.96-.88 1.96-1.96V12C21 10.34 19.66 9 18 9"}),"Cake");var ye={},Qt=h;Object.defineProperty(ye,"__esModule",{value:!0});var Ne=ye.default=void 0,Zt=Qt(p()),er=e;Ne=ye.default=(0,Zt.default)((0,er.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents");var Ce={},tr=h;Object.defineProperty(Ce,"__esModule",{value:!0});var Ye=Ce.default=void 0,rr=tr(p()),or=e;Ye=Ce.default=(0,rr.default)((0,or.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCard");var Se={},ar=h;Object.defineProperty(Se,"__esModule",{value:!0});var ne=Se.default=void 0,sr=ar(p()),ir=e;ne=Se.default=(0,sr.default)((0,ir.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock");var _e={},nr=h;Object.defineProperty(_e,"__esModule",{value:!0});var Ge=_e.default=void 0,lr=nr(p()),cr=e;Ge=_e.default=(0,lr.default)((0,cr.jsx)("path",{d:"M17 12h-5v5h5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1zm3 18H5V8h14z"}),"Event");var we={},dr=h;Object.defineProperty(we,"__esModule",{value:!0});var Ue=we.default=void 0,ur=dr(p()),xr=e;Ue=we.default=(0,ur.default)((0,xr.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email");function hr({onSuccess:g,onCancel:u,selectedPackage:C}){const[x,n]=s.useState({number:"",expiry:"",cvv:"",name:"",email:""}),[l,d]=s.useState(""),[R,E]=s.useState(!1),[w,D]=s.useState(!1),b=f=>V=>{var P,k;let S=V.target.value;f==="number"&&(S=((P=S.replace(/\s/g,"").match(/.{1,4}/g))==null?void 0:P.join(" "))||"",D(!1)),f==="expiry"&&(S=((k=S.replace(/\D/g,"").match(/.{1,2}/g))==null?void 0:k.join("/"))||""),n(v=>({...v,[f]:S})),d("")},M=async f=>{if(f.preventDefault(),E(!0),d(""),!x.email||!x.number||!x.expiry||!x.cvv||!x.name){d("Пожалуйста, заполните все поля"),E(!1);return}if(!x.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){d("Пожалуйста, введите корректный email адрес"),E(!1);return}D(!0),E(!1),d("К оплате принимаются только карты Капибанка")};return e.jsx(i,{sx:{minHeight:"100vh",bgcolor:"#1a1a1a",py:4,px:2},children:e.jsx(B,{maxWidth:"sm",children:e.jsxs(F,{elevation:3,sx:{p:4,bgcolor:"rgba(42, 8, 69, 0.95)",backdropFilter:"blur(10px)",borderRadius:4,border:"1px solid rgba(78, 205, 196, 0.1)"},children:[e.jsxs(i,{sx:{mb:4,textAlign:"center"},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,sx:{color:"#4ECDC4",textShadow:"0 0 10px rgba(78, 205, 196, 0.3)"},children:"Оплата"}),C&&e.jsxs(a,{variant:"h6",sx:{color:"rgba(255,255,255,0.9)"},children:[C.amount," ",C.amount>=5?"Астролапок":"Астролапки"," за ",C.price]})]}),e.jsxs("form",{onSubmit:M,children:[e.jsx(O,{fullWidth:!0,label:"Email",value:x.email,onChange:b("email"),margin:"normal",type:"email",InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(Ue,{sx:{color:"#4ECDC4"}})})},placeholder:"example@mail.com",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}}),e.jsx(O,{fullWidth:!0,label:"Номер карты",value:x.number,onChange:b("number"),margin:"normal",InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(Ye,{sx:{color:"#4ECDC4"}})})},placeholder:"Введите номер карты",inputProps:{maxLength:19},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}}),e.jsxs(i,{sx:{display:"flex",gap:2,my:2},children:[e.jsx(O,{label:"Срок действия",value:x.expiry,onChange:b("expiry"),InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(Ge,{sx:{color:"#4ECDC4"}})})},placeholder:"MM/YY",inputProps:{maxLength:5},sx:{flex:1,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}}),e.jsx(O,{label:"CVV",value:x.cvv,onChange:b("cvv"),InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(ne,{sx:{color:"#4ECDC4"}})})},type:"password",inputProps:{maxLength:3},sx:{width:"120px","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}})]}),e.jsx(O,{fullWidth:!0,label:"Имя владельца",value:x.name,onChange:b("name"),margin:"normal",placeholder:"Capy Bara",InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(X,{sx:{color:"#4ECDC4"}})})},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}}),l&&e.jsx(le,{in:!0,children:e.jsx(Fe,{severity:w?"info":"error",sx:{my:2,bgcolor:w?"rgba(78, 205, 196, 0.1)":"rgba(255, 107, 107, 0.1)",color:w?"#4ECDC4":"#FF6B6B",border:`1px solid ${w?"#4ECDC4":"#FF6B6B"}`,"& .MuiAlert-icon":{color:w?"#4ECDC4":"#FF6B6B"}},children:l})}),e.jsxs(i,{sx:{display:"flex",gap:2,mt:4},children:[e.jsx(L,{variant:"outlined",onClick:u,fullWidth:!0,sx:{borderColor:"#4ECDC4",color:"#4ECDC4","&:hover":{borderColor:"#3dbdb5",bgcolor:"rgba(77, 205, 196, 0.1)"}},children:"Отмена"}),e.jsx(L,{type:"submit",variant:"contained",fullWidth:!0,disabled:R,sx:{bgcolor:"#4ECDC4",color:"#1a1a1a",fontWeight:"bold","&:hover":{bgcolor:"#3dbdb5"},"&:disabled":{bgcolor:"rgba(78, 205, 196, 0.3)",color:"rgba(255, 255, 255, 0.3)"}},children:R?"Обработка...":"Оплатить"})]})]}),e.jsxs(a,{variant:"body2",sx:{mt:3,textAlign:"center",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(ne,{sx:{fontSize:"1rem",color:"#4ECDC4"}}),"Безопасная оплата через КапиБанк"]})]})})})}const pr=[{title:"Лунный календарь «Циклы света»",description:"Планируйте дела по фазам Луны и Солнца в удобном PDF. Получите доступ к древней астрологической мудрости в современном формате для гармоничной жизни в потоке космических энергий.",image:"/static/service1.png",price:"1 астролапка",features:["Ежедневные астрологические рекомендации","Инфографика‑календарь с указанием фаз луны","Советы по ритуалам в каждой фазе"]},{title:"Премиум‑карта «Звёздный навигатор»",description:"Полный астрологический анализ на год вперёд с дополнительными опциями для максимального погружения. Раскройте потенциал своей судьбы с помощью древних знаний.",image:"/static/service2.png",price:"5 астролапок",features:["Натальная карта + транзиты планет","Углублённый отчёт в подарочном буклете","Видеоразбор от астролога-эксперта"]},{title:"Экспедиция «Врата Созвездий»",description:"Личный астролог отправится в древнее место силы в предгорьях Капибаревской Сопки, где проведёт многодневный ритуал очищения вашей кармы в период максимальной активности вашего зодиакального созвездия.",image:"/static/service3.png",price:"25 астролапок",features:["4 дня ритуалов в местах пересечения лей-линий звёздных энергий Капибаревской Сопки","Создание персонального оберега из горного хрусталя в час силы*"],footnote:"*Доставка оберега оплачивается отдельно"}],gr=[{name:"Елена Звездова",title:"Мастер натальных карт",image:"/static/astrologer1.jpg",sign:"Овен",experience:15,specialization:"Ведические практики, натальные карты, прогрессии",description:"С детства одаренная необычным видением мира, Елена посвятила 15 лет изучению ведической астрологии в Непале и Тибете. Её прогнозы поражают точностью и глубиной, а методики работы с кармическими узлами признаны уникальными даже среди опытных астрологов.",achievements:["Автор методики «Кармические Ключи»","Создатель собственной школы астрологии","Личный астролог известных деятелей искусства"],availability:8},{name:"Михаил Лунев",title:"Астролог-прогностик",image:"/static/astrologer2.jpg",sign:"Скорпион",experience:12,specialization:"Хорарная астрология, прогнозирование, финансовые циклы",description:"Михаил соединяет классические техники астрологии с передовыми методами анализа данных. Специализируется на точных прогнозах и выборе благоприятного времени для важных решений. Его консультации особенно ценят бизнесмены и те, кто стоит перед важным жизненным выбором.",achievements:["Разработчик системы «Астро-финанс»","Преподаватель в Академии Астрологических Наук","Автор книги «Время Успеха»"],availability:4},{name:"Анастасия Звездоцвет",title:"Астропсихолог",image:"/static/astrologer3.jpg",sign:"Рыбы",experience:9,specialization:"Психологическая астрология, детские гороскопы, совместимость",description:"Анастасия обладает уникальным даром соединять астрологические знания с глубоким пониманием психологии человека. Её подход помогает не только понять причины происходящего, но и найти путь к гармонии. Специализируется на семейных отношениях и детских гороскопах.",achievements:["Создатель методики «Астро-Гармония»","Ведущая астрологического подкаста","Эксперт по детской астропсихологии"],availability:6}],fr=["Первая услуга бесплатно!","Личный астролог подберёт благоприятные даты","Дипломированные астрологи с многолетним опытом","Сакральные знания древней астрологии","Все услуги в гармонии с движением планет"],mr="/api";function br({onStartConsultation:g,credits:u,hasUsedFreeCredit:C,onCreditsUpdate:x,totalAvailableHours:n,userInfo:l}){const[d,R]=s.useState(null),[E,w]=s.useState(0),[D,b]=s.useState(!1),[M,f]=s.useState(null),[V,S]=s.useState(!1),[P,k]=s.useState(!1),[v,q]=s.useState(n);s.useEffect(()=>{if(l!=null&&l.email)if(n!==null){q(n);const r=setTimeout(()=>{k(!0)},2e3);return()=>clearTimeout(r)}else(async()=>{try{const c=await fetch(`${mr}/astrologers`,{credentials:"include"});if(c.ok){const $=await c.json();if($.success&&$.astrologers){const I=$.astrologers.reduce((m,Y)=>{const ee=Y.availableHours-Y.bookedHours;return m+Math.max(0,ee)},0);q(I),setTimeout(()=>{k(!0)},2e3)}}}catch(c){console.error("Error fetching astrologers:",c)}})();else k(!1)},[n,l]);const H=()=>{const r=E+1;w(r),r===7&&S(!0)},N=(r,c)=>{c!=="clickaway"&&S(!1)},_=r=>{f(r),b(!0)},J=()=>{M&&x&&x(u+M.amount),b(!1),f(null)},Q=()=>{b(!1),f(null)},Z=r=>r===0?"часов":r===1?"час":r>1&&r<5?"часа":"часов";return D?e.jsx(hr,{selectedPackage:M,onSuccess:J,onCancel:Q}):e.jsxs(i,{sx:{bgcolor:"#1a1a1a",minHeight:"100vh",color:"white",position:"relative"},children:[e.jsx(gt,{open:V,autoHideDuration:6e3,onClose:N,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(Fe,{onClose:N,severity:"success",variant:"filled",sx:{width:"100%",bgcolor:"#4ECDC4","& .MuiAlert-icon":{color:"white"},"& .MuiAlert-message":{color:"white",fontSize:"1.1rem"}},children:e.jsxs(i,{sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h6",component:"div",sx:{mb:1},children:"🌟 Поздравляем! Вы нашли секретную капибару! 🌟"}),e.jsx(a,{children:"Вам будет доступен бесплатный астрологический прогноз при первом обращении к нашим мастерам!"})]})})}),e.jsx(le,{in:P&&(l==null?void 0:l.email),timeout:800,children:e.jsx(i,{sx:{position:"fixed",bottom:30,left:30,zIndex:1e3,maxWidth:360,animation:v===0?"pulse 1.5s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"100%":{transform:"scale(1)"}},cursor:"pointer"},onClick:g,children:e.jsx(F,{elevation:8,sx:{borderRadius:2,overflow:"hidden",background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",boxShadow:"0 4px 20px rgba(0,0,0,0.25)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 8px 30px rgba(0,0,0,0.3)",background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",backgroundSize:"200% 200%",animation:"gradientShift 2s ease infinite"},"@keyframes gradientShift":{"0%":{backgroundPosition:"0% 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0% 50%"}}},children:e.jsxs(i,{sx:{p:2.5,display:"flex",alignItems:"center",gap:2},children:[e.jsx(be,{sx:{fontSize:36,color:"white",animation:v===0?"spin 3s linear infinite":"pulse 2s ease-in-out infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},"@keyframes pulse":{"0%":{opacity:.7},"50%":{opacity:1},"100%":{opacity:.7}}}}),e.jsxs(i,{children:[e.jsx(a,{variant:"h6",sx:{fontWeight:"bold",color:"white",textShadow:"0 1px 2px rgba(0,0,0,0.2)",lineHeight:1.2},children:v===0?"Консультации закончились!":`Осталось всего ${v} ${Z(v)} доступных для бронирования!`}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)",mt:.5},children:v===0?"Запишитесь в лист ожидания сейчас":"Успейте забронировать встречу с астрологом"})]})]})})})}),e.jsxs(i,{sx:{background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",py:2,px:4,display:"flex",justifyContent:"center",alignItems:"center",gap:2},children:[e.jsx(Te,{}),e.jsx(a,{variant:"h6",sx:{fontWeight:500},children:C?`У вас ${u} астролапка(ок) для консультаций`:"Первая консультация бесплатно! Начните свой духовный путь прямо сейчас"})]}),e.jsx(i,{sx:{background:"linear-gradient(135deg, #2a0845 0%, #6441A5 100%)",color:"white",height:"calc(100vh - 56px)",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",textAlign:"center"},children:e.jsxs(B,{maxWidth:"lg",children:[e.jsx(a,{variant:"h1",component:"h1",gutterBottom:!0,sx:{fontSize:{xs:"2.5rem",md:"4rem"},fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.3)",mb:4},children:"Астрология и древние практики"}),e.jsx(a,{variant:"h5",sx:{mb:6,opacity:.9,maxWidth:"800px",margin:"0 auto",lineHeight:1.5},children:"Откройте врата в мир древних знаний с опытными астрологами. Доверьтесь мудрости веков для преображения вашей судьбы."}),e.jsx(L,{variant:"contained",size:"large",onClick:g,sx:{bgcolor:"rgba(255,255,255,0.9)",color:"#2a0845",fontSize:"1.2rem",py:2,px:6,mt:4,borderRadius:"50px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",position:"relative",zIndex:2,"&:hover":{bgcolor:"white",transform:"scale(1.05) translateY(-2px)",transition:"all 0.3s ease",boxShadow:"0 6px 25px rgba(0,0,0,0.2)"}},children:"Начать свой путь"}),e.jsx(A,{title:"Погладь капибару на удачу!",placement:"top",children:e.jsx(X,{sx:{position:"absolute",bottom:20,right:20,fontSize:"2rem",cursor:"pointer",opacity:.7,"&:hover":{opacity:1,transform:"rotate(360deg)",transition:"all 0.5s ease"}},onClick:H})}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mt:4,bgcolor:"rgba(255,255,255,0.1)",borderRadius:3,p:2,maxWidth:"fit-content",margin:"2rem auto"},children:[e.jsx(ft,{badgeContent:u,color:"primary",children:e.jsx(ge,{sx:{fontSize:"2rem"}})}),e.jsx(a,{children:C?`У вас осталось ${u} астролапка(ок)`:"У вас есть бесплатная астролапка для первой консультации!"})]})]})}),e.jsxs(B,{sx:{py:12},children:[e.jsx(a,{variant:"h2",component:"h2",textAlign:"center",gutterBottom:!0,sx:{mb:8,position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",display:"block",fontWeight:"bold",fontSize:{xs:"2rem",md:"3rem"},textAlign:"center",letterSpacing:"0.02em",WebkitTextFillColor:"transparent"}},children:"Наши услуги"}),e.jsx(y,{container:!0,spacing:6,children:pr.map((r,c)=>e.jsx(y,{item:!0,xs:12,md:4,sx:{display:"flex","& > *":{flex:1}},children:e.jsxs(Ie,{sx:{height:"100%",display:"flex",flexDirection:"column",bgcolor:"rgba(255,255,255,0.05)",backdropFilter:"blur(10px)",position:"relative",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",borderRadius:2,transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",bgcolor:"rgba(255,255,255,0.05)"}},children:[e.jsxs(i,{sx:{position:"relative"},children:[e.jsx(Be,{component:"img",height:"300",image:r.image,alt:r.title,sx:{filter:"brightness(0.8)",objectFit:"cover",width:"100%",height:"300px",borderRadius:"8px 8px 0 0"}}),e.jsx(i,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"100%",background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 50%)",borderRadius:"8px 8px 0 0"}})]}),e.jsxs(Re,{sx:{color:"white",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(i,{children:[e.jsx(a,{variant:"h5",component:"h3",gutterBottom:!0,sx:{color:"#4ECDC4",fontSize:"1.5rem"},children:r.title}),e.jsx(a,{variant:"body1",sx:{mb:2,color:"rgba(255,255,255,0.8)",fontSize:"1.1rem",lineHeight:1.5},children:r.description}),e.jsx(te,{sx:{mb:2,pl:0},children:r.features&&r.features.map(($,I)=>e.jsxs(re,{sx:{py:.5,px:0},children:[e.jsx(oe,{sx:{minWidth:"30px"},children:e.jsx(K,{fontSize:"small",sx:{color:"#FF6B6B"}})}),e.jsx(U,{primary:$,sx:{"& .MuiTypography-root":{fontSize:"1rem",color:"rgba(255,255,255,0.9)",lineHeight:1.4}}})]},I))}),r.footnote&&e.jsx(a,{variant:"caption",sx:{display:"block",mt:1,fontStyle:"italic",color:"rgba(255,255,255,0.6)",fontSize:"0.75rem"},children:r.footnote})]}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2,mt:"auto"},children:[e.jsx(a,{variant:"h6",sx:{color:"#FF6B6B",textDecoration:c===0?"line-through":"none",opacity:c===0?.7:1},children:r.price}),c===0?e.jsx(a,{variant:"h6",sx:{color:"#4ECDC4",fontWeight:"bold"},children:"БЕСПЛАТНО!"}):null]})]})]})},c))}),e.jsxs(F,{sx:{mt:8,p:4,bgcolor:"rgba(255,255,255,0.05)",borderRadius:4,backdropFilter:"blur(10px)",textAlign:"center"},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,sx:{color:"#4ECDC4"},children:"Приобретите астролапки для оплаты услуг"}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.8)",mb:3},children:"Инвестируйте в свою судьбу с помощью опытных астрологов и древних практик"}),e.jsx(y,{container:!0,spacing:3,justifyContent:"center",children:[{amount:1,price:"5000₡",discount:"Пробный пакет"},{amount:5,price:"20000₡",discount:"15% выгода"},{amount:25,price:"75000₡",discount:"40% выгода"}].map((r,c)=>e.jsx(y,{item:!0,xs:12,sm:4,sx:{display:"flex"},children:e.jsxs(F,{sx:{p:3,bgcolor:"rgba(255,255,255,0.03)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",width:"100%",height:"100%","&:hover":{transform:"scale(1.05)",bgcolor:"rgba(255,255,255,0.05)"}},children:[e.jsxs(i,{sx:{flex:1},children:[e.jsxs(a,{variant:"h5",sx:{color:"#4ECDC4",mb:1},children:[r.amount," ",r.amount>=5?"Астролапок":"Астролапки"]}),e.jsx(a,{variant:"h6",sx:{color:"#FF6B6B"},children:r.price}),e.jsxs(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.6)"},children:["Скидка ",r.discount]})]}),e.jsx(L,{variant:"contained",fullWidth:!0,onClick:()=>_(r),sx:{mt:2,bgcolor:"#4ECDC4","&:hover":{bgcolor:"#3dbdb5"}},children:"Купить"})]})},c))})]})]}),e.jsx(i,{sx:{bgcolor:"rgba(255,255,255,0.02)",py:12},children:e.jsxs(B,{children:[e.jsx(a,{variant:"h3",component:"h2",textAlign:"center",gutterBottom:!0,sx:{mb:8,background:"linear-gradient(45deg, #4ECDC4, #FF6B6B)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"Почему мы?"}),e.jsxs(y,{container:!0,spacing:6,children:[e.jsx(y,{item:!0,xs:12,md:6,children:e.jsx(te,{children:fr.map((r,c)=>e.jsxs(re,{sx:{mb:2,bgcolor:"rgba(255,255,255,0.03)",borderRadius:2,transition:"all 0.3s ease","&:hover":{bgcolor:"rgba(255,255,255,0.05)",transform:"translateX(10px)"}},children:[e.jsx(oe,{children:e.jsx(K,{sx:{color:"#4ECDC4"}})}),e.jsx(U,{primary:r,sx:{"& .MuiTypography-root":{color:"rgba(255,255,255,0.9)"}}})]},c))})}),e.jsx(y,{item:!0,xs:12,md:6,children:e.jsxs(i,{sx:{p:4,bgcolor:"rgba(255,255,255,0.03)",borderRadius:4,backdropFilter:"blur(10px)"},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,sx:{color:"#4ECDC4"},children:"Начните сегодня"}),e.jsx(a,{paragraph:!0,sx:{color:"rgba(255,255,255,0.8)"},children:"Наши опытные астрологи готовы применить древние знания, чтобы открыть для вас новые пути и возможности в потоке космических энергий."}),e.jsx(L,{variant:"contained",size:"large",onClick:g,sx:{bgcolor:"#4ECDC4","&:hover":{bgcolor:"#3dbdb5"}},children:"Записаться к астрологу"})]})})]})]})}),e.jsx(B,{sx:{py:12},children:e.jsx(y,{container:!0,spacing:6,children:[{icon:e.jsx(He,{sx:{fontSize:60,color:"#4ECDC4"}}),title:"Опытные астрологи",description:"Наши мастера совмещают классическую астрологию с древними практиками."},{icon:e.jsx(Oe,{sx:{fontSize:60,color:"#4ECDC4"}}),title:"Астрологическое время",description:"Все услуги проводятся в моменты максимальной силы планет."},{icon:e.jsx(We,{sx:{fontSize:60,color:"#4ECDC4"}}),title:"Индивидуальный подход",description:"Каждая услуга основана на вашей личной натальной карте."}].map((r,c)=>e.jsx(y,{item:!0,xs:12,md:4,sx:{display:"flex","& > *":{flex:1}},children:e.jsxs(i,{sx:{textAlign:"center",p:3,bgcolor:"rgba(255,255,255,0.03)",borderRadius:4,transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",height:"100%","&:hover":{transform:"translateY(-10px)",bgcolor:"rgba(255,255,255,0.05)"}},children:[e.jsx(i,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:r.icon}),e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{color:"#4ECDC4",mt:2},children:r.title}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.8)",flex:1},children:r.description})]})},c))})}),e.jsx(i,{sx:{bgcolor:"rgba(255,255,255,0.01)",py:12},children:e.jsxs(B,{children:[e.jsx(a,{variant:"h2",component:"h2",textAlign:"center",gutterBottom:!0,sx:{mb:8,position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, #4ECDC4, #FF6B6B)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",display:"block",fontWeight:"bold",fontSize:{xs:"2rem",md:"3rem"},textAlign:"center",letterSpacing:"0.02em",WebkitTextFillColor:"transparent"}},children:"Наши астрологи"}),e.jsx(a,{variant:"h6",textAlign:"center",sx:{mb:6,color:"rgba(255,255,255,0.8)",maxWidth:"800px",mx:"auto"},children:"Познакомьтесь с нашими опытными астрологами, которые помогут вам раскрыть тайны вашей судьбы и направят на путь гармонии и процветания"}),e.jsx(y,{container:!0,spacing:6,children:gr.map((r,c)=>e.jsx(y,{item:!0,xs:12,md:4,sx:{display:"flex",height:"100%"},children:e.jsxs(Ie,{sx:{display:"flex",flexDirection:"column",bgcolor:"rgba(255,255,255,0.03)",backdropFilter:"blur(10px)",borderRadius:4,overflow:"hidden",transition:"all 0.3s ease",height:"100%",width:"100%","&:hover":{transform:"translateY(-10px)",boxShadow:"0 12px 30px rgba(78, 205, 196, 0.2)","& .MuiCardMedia-root":{transform:"scale(1.05)"}}},children:[e.jsxs(i,{sx:{position:"relative",overflow:"hidden"},children:[e.jsx(Be,{component:"img",height:"300",image:r.image,alt:r.name,sx:{transition:"transform 0.5s ease",objectFit:"cover"}}),e.jsx(i,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"50%",background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 100%)"}}),e.jsxs(i,{sx:{position:"absolute",bottom:0,left:0,width:"100%",p:2,zIndex:2},children:[e.jsx(a,{variant:"h5",component:"h3",sx:{color:"white",fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:r.name}),e.jsx(a,{variant:"subtitle1",sx:{color:"#4ECDC4",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:r.title})]}),e.jsx(ae,{label:`${r.availability} часов доступно`,sx:{position:"absolute",top:16,right:16,bgcolor:r.availability>0?"rgba(78, 205, 196, 0.9)":"rgba(255, 107, 107, 0.9)",color:"white",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}})]}),e.jsxs(Re,{sx:{p:3,flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsxs(i,{sx:{mb:2,display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(ae,{icon:e.jsx(qe,{fontSize:"small"}),label:`Знак: ${r.sign}`,size:"small",sx:{bgcolor:"rgba(255,255,255,0.05)",color:"#FF6B6B"}}),e.jsx(ae,{icon:e.jsx(Ve,{fontSize:"small"}),label:`Опыт: ${r.experience} лет`,size:"small",sx:{bgcolor:"rgba(255,255,255,0.05)",color:"#4ECDC4"}})]}),e.jsx(a,{variant:"subtitle2",sx:{color:"#4ECDC4",mb:1},children:"Специализация:"}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",mb:2},children:r.specialization}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",mb:2,flex:1},children:r.description}),e.jsx(mt,{sx:{my:2,bgcolor:"rgba(255,255,255,0.1)"}}),e.jsxs(i,{children:[e.jsxs(a,{variant:"subtitle2",sx:{color:"#4ECDC4",mb:1,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ne,{fontSize:"small"})," Достижения:"]}),e.jsx(te,{dense:!0,disablePadding:!0,children:r.achievements.map(($,I)=>e.jsxs(re,{sx:{py:.5,px:0},children:[e.jsx(oe,{sx:{minWidth:"30px"},children:e.jsx(K,{fontSize:"small",sx:{color:"#FF6B6B"}})}),e.jsx(U,{primary:$,sx:{"& .MuiTypography-root":{fontSize:"0.875rem",color:"rgba(255,255,255,0.8)"}}})]},I))})]}),e.jsx(L,{variant:"contained",fullWidth:!0,onClick:g,sx:{mt:3,background:"linear-gradient(45deg, #4ECDC4, #FF6B6B)",color:"white","&:hover":{background:"linear-gradient(45deg, #3dbdb5, #ff5b5b)",transform:"translateY(-2px)"}},children:"Запись на консультацию"})]})]})},c))})]})})]})}var Me={},vr=h;Object.defineProperty(Me,"__esModule",{value:!0});var Ke=Me.default=void 0,jr=vr(p()),yr=e;Ke=Me.default=(0,jr.default)((0,yr.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var ke={},Cr=h;Object.defineProperty(ke,"__esModule",{value:!0});var Xe=ke.default=void 0,Sr=Cr(p()),Le=e;Xe=ke.default=(0,Sr.default)([(0,Le.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,Le.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");const _r=[{text:"Читает карту небесных тел",emoji:"🌚"},{text:"Разгадывает послания небес",emoji:"✨"},{text:"Советуется с планетами",emoji:"🌍"},{text:"Сверяется с гороскопом",emoji:"🔮"},{text:"Вслушивается в эхо глубин",emoji:"🌊"}],wr=`
  @keyframes loadingDots {
    0% { content: '.'; }
    33% { content: '..'; }
    66% { content: '...'; }
    100% { content: '.'; }
  }
  .loading-dots::after {
    content: '.';
    animation: loadingDots 1.5s infinite;
    display: inline-block;
    width: 24px;
    text-align: left;
  }
  @keyframes fadeInOut {
    0% { opacity: 0; }
    20% { opacity: 1; }
    80% { opacity: 1; }
    100% { opacity: 0; }
  }
  .loading-message {
    animation: fadeInOut 3s ease-in-out;
  }
`,Mr=bt({palette:{mode:"dark",primary:{main:"#4ECDC4"},background:{default:"#1a1a1a",paper:"#2a2a2a"}},typography:{fontFamily:'"Roboto", "Arial", sans-serif'},components:{MuiButton:{styleOverrides:{root:{borderRadius:"50px",textTransform:"none"}}}}}),z="/api";function kr(){const[g,u]=s.useState([]),[C,x]=s.useState(""),[n,l]=s.useState(!1),[d,R]=s.useState(!1),[E,w]=s.useState(0),[D,b]=s.useState(!1),[M,f]=s.useState(""),[V,S]=s.useState(0),[P,k]=s.useState(0),[v,q]=s.useState([]),[H,N]=s.useState([]),[_,J]=s.useState(null),[Q,Z]=s.useState(""),[r,c]=s.useState(null),[$,I]=s.useState(null),[m,Y]=s.useState(null),[ee,$e]=s.useState(!1),Je=s.useRef(null),[$r,Qe]=s.useState(0),Ze=()=>{var t;(t=Je.current)==null||t.scrollIntoView({behavior:"smooth"})},Ee=()=>{Qe(t=>t+1)};s.useEffect(()=>{D&&!n&&Ee()},[D,n]),s.useEffect(()=>{Ze()},[g]),s.useEffect(()=>{d&&(console.log("Initial session check on chat open"),st(),rt())},[d]),s.useEffect(()=>{d&&tt()},[d]),s.useEffect(()=>{let t;return n&&(t=setInterval(()=>{S(o=>(o+1)%_r.length)},3e3)),()=>{t&&clearInterval(t)}},[n]),s.useEffect(()=>{if(H.length>0){const t=H.reduce((o,j)=>{const ut=j.availableHours-j.bookedHours;return o+ut},0);J(t),t===0&&!Q&&et()}},[H]),s.useEffect(()=>{d&&De()},[d]);const et=async()=>{try{const t=await fetch(`${z}/flag`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch flag");const o=await t.json();o.success&&o.flag&&(Z(o.flag),u(j=>[...j,{text:o.flag,sender:"bot",special:!0}]))}catch(t){console.error("Error fetching flag:",t)}},tt=async()=>{try{console.log("Loading chat history...");const t=await fetch(`${z}/chat/history`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const o=await t.json();o.success&&o.history&&o.history.length>0?(console.log("Chat history loaded:",o.history.length,"messages"),u(o.history)):console.log("No chat history found or empty history")}catch(t){console.error("Error loading chat history:",t)}},rt=async()=>{try{const t=await fetch(`${z}/user/balance`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const o=await t.json();o.success&&k(o.balance)}catch(t){console.error("Error loading user balance:",t)}},ot=async()=>{try{const t=await fetch(`${z}/bookings`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const o=await t.json();o.success&&q(o.bookings||[])}catch(t){console.error("Error loading user bookings:",t)}},De=async()=>{try{const t=await fetch(`${z}/astrologers`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const o=await t.json();o.success&&N(o.astrologers||[])}catch(t){console.error("Error loading astrologers:",t)}},at=()=>{w(t=>{const o=t+1;return o===5&&u(j=>[...j,{text:"🌟 Капибара шепчет: 'Запишитесь на консультацию и узнайте все о своей судьбе!' 🌟",sender:"bot",special:!0}]),o})},st=async()=>{try{console.log("Checking session status...");const t=await fetch(`${z}/session/status`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const o=await t.json();return b(o.ready),o.userInfo&&Y(o.userInfo),o.message&&o.message!==M&&(f(o.message),(g.length===0||o.message!==M&&!g.some(j=>j.sender==="bot"&&j.text===o.message))&&u(j=>[...j,{text:o.message,sender:"bot",special:o.message.includes("tctf{")}])),o.ready&&Ee(),o}catch(t){return console.error("Error checking session status:",t),M!=="Ошибка при проверке статуса сессии"&&(f("Ошибка при проверке статуса сессии"),(g.length===0||!g.some(o=>o.text==="Ошибка при проверке статуса сессии"))&&u(o=>[...o,{text:"Ошибка при проверке статуса сессии",sender:"bot",special:!1}])),null}},it=()=>{R(!0)},nt=t=>{ot(),c(t.currentTarget)},lt=()=>{c(null)},ct=t=>{De(),I(t.currentTarget)};s.useEffect(()=>{if(d&&(m!=null&&m.email)&&_!==null){const t=setTimeout(()=>{$e(!0)},2e3);return()=>clearTimeout(t)}else $e(!1)},[d,m==null?void 0:m.email,_]);const dt=t=>t===0?"часов":t===1?"час":t>1&&t<5?"часа":"часов";return e.jsxs(vt,{theme:Mr,children:[e.jsx("style",{children:wr}),d?e.jsxs(i,{sx:{minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, #2a0845 0%, #6441A5 100%)",padding:0,margin:0,display:"flex"},children:[e.jsx(le,{in:ee&&(m==null?void 0:m.email),timeout:800,children:e.jsx(i,{sx:{position:"fixed",bottom:30,left:30,zIndex:1e3,maxWidth:320,animation:_===0?"pulse 1.5s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"100%":{transform:"scale(1)"}},cursor:"pointer"},children:e.jsx(F,{elevation:8,sx:{borderRadius:2,overflow:"hidden",background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",boxShadow:"0 4px 20px rgba(0,0,0,0.25)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 8px 30px rgba(0,0,0,0.3)"}},children:e.jsxs(i,{sx:{p:2,display:"flex",alignItems:"center",gap:2},children:[e.jsx(be,{sx:{fontSize:32,color:"white",animation:_===0?"spin 3s linear infinite":"pulse 2s ease-in-out infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},"@keyframes pulse":{"0%":{opacity:.7},"50%":{opacity:1},"100%":{opacity:.7}}}}),e.jsx(i,{children:e.jsx(a,{variant:"body1",sx:{fontWeight:"bold",color:"white",textShadow:"0 1px 2px rgba(0,0,0,0.2)",lineHeight:1.2},children:_===0?"Консультации закончились!":`Осталось всего ${_} ${dt(_)} для бронирования!`})})]})})})}),e.jsx(B,{maxWidth:"md",sx:{height:"100vh",display:"flex",flexDirection:"column",py:4},children:e.jsxs(F,{elevation:3,sx:{flexGrow:1,display:"flex",flexDirection:"column",bgcolor:"background.paper",borderRadius:4,overflow:"hidden"},children:[e.jsxs(i,{sx:{p:2,borderBottom:1,borderColor:"divider",background:"linear-gradient(135deg, #2a0845 0%, #6441A5 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(a,{variant:"h5",sx:{fontWeight:500},children:"Ваша Духовная Консультация"}),e.jsx(i,{sx:{display:"flex",alignItems:"center",bgcolor:"rgba(255, 255, 255, 0.1)",px:1,py:0,borderRadius:2,gap:1},children:e.jsx(A,{title:"Баланс астролапок",children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{variant:"body1",children:P}),e.jsx("img",{src:"/static/lapka.png",alt:"Астролапка",style:{width:32,height:32,objectFit:"contain",margin:0,padding:0}})]})})})]}),e.jsxs(i,{children:[e.jsx(A,{title:"Погладить капибару",children:e.jsx(G,{color:"inherit",onClick:at,sx:{mr:1},children:e.jsx(X,{})})}),e.jsx(A,{title:"Вернуться на главную",children:e.jsx(G,{color:"inherit",onClick:()=>R(!1),children:e.jsx(Ke,{})})}),e.jsx(A,{title:"Мои бронирования",children:e.jsx(G,{color:"inherit",onClick:nt,children:e.jsx(ge,{})})}),e.jsx(A,{title:"Доступность астрологов",children:e.jsx(G,{color:"inherit",onClick:ct,children:e.jsx(Xe,{})})})]})]}),e.jsxs(jt,{anchorEl:r,open:!!r,onClose:lt,PaperProps:{sx:{mt:1.5,width:280,maxHeight:300,overflow:"auto"}},children:[e.jsx(a,{sx:{p:1.5,fontWeight:"bold"},children:"Мои бронирования"}),v.length===0?e.jsx(Pe,{disabled:!0,children:"У вас пока нет забронированных консультаций"}):v.map(t=>e.jsx(Pe,{sx:{whiteSpace:"normal"},children:e.jsx(U,{primary:`${t.serviceName}`,secondary:`Астролог: ${t.astrologerName}`})},`${t.serviceId}-${t.astrologerId}`))]})]})})]}):e.jsx(br,{onStartConsultation:it,totalAvailableHours:_,userInfo:m})]})}ie.createRoot(document.getElementById("root")).render(e.jsx(yt.StrictMode,{children:e.jsx(kr,{})}));
