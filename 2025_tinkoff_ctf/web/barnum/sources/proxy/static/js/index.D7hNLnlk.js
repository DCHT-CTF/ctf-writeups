import{r as rt,g as ot,u as st,i as p,j as e,a as o,B as n,C as A,P as L,T as a,b as F,I as O,F as se,A as Ie,c as W,S as at,d as P,e as nt,G as M,f as it,h as lt,k as ct,L as we,l as _e,m as Me,n as ee,o as dt,p as ut,q as G,M as xt,s as ke,R as ht}from"./vendor.Du0dRBuD.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))x(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&x(c)}).observe(document,{childList:!0,subtree:!0});function y(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function x(i){if(i.ep)return;i.ep=!0;const l=y(i);fetch(i.href,l)}})();var te={},Ee=rt;te.createRoot=Ee.createRoot,te.hydrateRoot=Ee.hydrateRoot;var ae={},Z={};const pt=ot(st);var $e;function f(){return $e||($e=1,function(h){"use client";Object.defineProperty(h,"__esModule",{value:!0}),Object.defineProperty(h,"default",{enumerable:!0,get:function(){return u.createSvgIcon}});var u=pt}(Z)),Z}var ft=p;Object.defineProperty(ae,"__esModule",{value:!0});var re=ae.default=void 0,gt=ft(f()),mt=e;re=ae.default=(0,gt.default)((0,mt.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");var ne={},bt=p;Object.defineProperty(ne,"__esModule",{value:!0});var Re=ne.default=void 0,vt=bt(f()),jt=e;Re=ne.default=(0,vt.default)((0,jt.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var ie={},yt=p;Object.defineProperty(ie,"__esModule",{value:!0});var Be=ie.default=void 0,Ct=yt(f()),St=e;Be=ie.default=(0,Ct.default)((0,St.jsx)("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"}),"Timer");var le={},wt=p;Object.defineProperty(le,"__esModule",{value:!0});var Pe=le.default=void 0,_t=wt(f()),Mt=e;Pe=le.default=(0,_t.default)((0,Mt.jsx)("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"}),"AutoAwesome");var ce={},kt=p;Object.defineProperty(ce,"__esModule",{value:!0});var U=ce.default=void 0,Et=kt(f()),T=e;U=ce.default=(0,Et.default)([(0,T.jsx)("circle",{cx:"4.5",cy:"9.5",r:"2.5"},"0"),(0,T.jsx)("circle",{cx:"9",cy:"5.5",r:"2.5"},"1"),(0,T.jsx)("circle",{cx:"15",cy:"5.5",r:"2.5"},"2"),(0,T.jsx)("circle",{cx:"19.5",cy:"9.5",r:"2.5"},"3"),(0,T.jsx)("path",{d:"M17.34 14.86c-.87-1.02-1.6-1.89-2.48-2.91-.46-.54-1.05-1.08-1.75-1.32-.11-.04-.22-.07-.33-.09-.25-.04-.52-.04-.78-.04s-.53 0-.79.05c-.11.02-.22.05-.33.09-.7.24-1.28.78-1.75 1.32-.87 1.02-1.6 1.89-2.48 2.91-1.31 1.31-2.92 2.76-2.62 4.79.29 1.02 1.02 2.03 2.33 2.32.73.15 3.06-.44 5.54-.44h.18c2.48 0 4.81.58 5.54.44 1.31-.29 2.04-1.31 2.33-2.32.31-2.04-1.3-3.49-2.61-4.8"},"4")],"Pets");var de={},$t=p;Object.defineProperty(de,"__esModule",{value:!0});var ue=de.default=void 0,Dt=$t(f()),It=e;ue=de.default=(0,Dt.default)((0,It.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h5v-2H4v-6h18V6c0-1.11-.89-2-2-2m0 4H4V6h16zm-5.07 11.17-2.83-2.83-1.41 1.41L14.93 22 22 14.93l-1.41-1.41z"}),"CreditScore");var xe={},Rt=p;Object.defineProperty(xe,"__esModule",{value:!0});var Ae=xe.default=void 0,Bt=Rt(f()),Pt=e;Ae=xe.default=(0,Bt.default)((0,Pt.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer");var he={},At=p;Object.defineProperty(he,"__esModule",{value:!0});var pe=he.default=void 0,Lt=At(f()),Ht=e;pe=he.default=(0,Lt.default)((0,Ht.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m3.3 14.71L11 12.41V7h2v4.59l3.71 3.71z"}),"AccessTimeFilled");var fe={},zt=p;Object.defineProperty(fe,"__esModule",{value:!0});var Le=fe.default=void 0,Ft=zt(f()),Ot=e;Le=fe.default=(0,Ft.default)((0,Ot.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCard");var ge={},Tt=p;Object.defineProperty(ge,"__esModule",{value:!0});var oe=ge.default=void 0,Wt=Tt(f()),qt=e;oe=ge.default=(0,Wt.default)((0,qt.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock");var me={},Vt=p;Object.defineProperty(me,"__esModule",{value:!0});var He=me.default=void 0,Nt=Vt(f()),Yt=e;He=me.default=(0,Nt.default)((0,Yt.jsx)("path",{d:"M17 12h-5v5h5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1zm3 18H5V8h14z"}),"Event");var be={},Gt=p;Object.defineProperty(be,"__esModule",{value:!0});var ze=be.default=void 0,Ut=Gt(f()),Kt=e;ze=be.default=(0,Ut.default)((0,Kt.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email");function Xt({onSuccess:h,onCancel:u,selectedPackage:y}){const[x,i]=o.useState({number:"",expiry:"",cvv:"",name:"",email:""}),[l,c]=o.useState(""),[D,E]=o.useState(!1),[w,$]=o.useState(!1),b=g=>q=>{var I,k;let C=q.target.value;g==="number"&&(C=((I=C.replace(/\s/g,"").match(/.{1,4}/g))==null?void 0:I.join(" "))||"",$(!1)),g==="expiry"&&(C=((k=C.replace(/\D/g,"").match(/.{1,2}/g))==null?void 0:k.join("/"))||""),i(v=>({...v,[g]:C})),c("")},_=async g=>{if(g.preventDefault(),E(!0),c(""),!x.email||!x.number||!x.expiry||!x.cvv||!x.name){c("Пожалуйста, заполните все поля"),E(!1);return}if(!x.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){c("Пожалуйста, введите корректный email адрес"),E(!1);return}$(!0),E(!1),c("К оплате принимаются только карты Капибанка")};return e.jsx(n,{sx:{minHeight:"100vh",bgcolor:"#1a1a1a",py:4,px:2},children:e.jsx(A,{maxWidth:"sm",children:e.jsxs(L,{elevation:3,sx:{p:4,bgcolor:"rgba(42, 8, 69, 0.95)",backdropFilter:"blur(10px)",borderRadius:4,border:"1px solid rgba(78, 205, 196, 0.1)"},children:[e.jsxs(n,{sx:{mb:4,textAlign:"center"},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,sx:{color:"#4ECDC4",textShadow:"0 0 10px rgba(78, 205, 196, 0.3)"},children:"Оплата"}),y&&e.jsxs(a,{variant:"h6",sx:{color:"rgba(255,255,255,0.9)"},children:[y.amount," ",y.amount>=5?"Астролапок":"Астролапки"," за ",y.price]})]}),e.jsxs("form",{onSubmit:_,children:[e.jsx(F,{fullWidth:!0,label:"Email",value:x.email,onChange:b("email"),margin:"normal",type:"email",InputProps:{startAdornment:e.jsx(O,{position:"start",children:e.jsx(ze,{sx:{color:"#4ECDC4"}})})},placeholder:"example@mail.com",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}}),e.jsx(F,{fullWidth:!0,label:"Номер карты",value:x.number,onChange:b("number"),margin:"normal",InputProps:{startAdornment:e.jsx(O,{position:"start",children:e.jsx(Le,{sx:{color:"#4ECDC4"}})})},placeholder:"Введите номер карты",inputProps:{maxLength:19},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}}),e.jsxs(n,{sx:{display:"flex",gap:2,my:2},children:[e.jsx(F,{label:"Срок действия",value:x.expiry,onChange:b("expiry"),InputProps:{startAdornment:e.jsx(O,{position:"start",children:e.jsx(He,{sx:{color:"#4ECDC4"}})})},placeholder:"MM/YY",inputProps:{maxLength:5},sx:{flex:1,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}}),e.jsx(F,{label:"CVV",value:x.cvv,onChange:b("cvv"),InputProps:{startAdornment:e.jsx(O,{position:"start",children:e.jsx(oe,{sx:{color:"#4ECDC4"}})})},type:"password",inputProps:{maxLength:3},sx:{width:"120px","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}})]}),e.jsx(F,{fullWidth:!0,label:"Имя владельца",value:x.name,onChange:b("name"),margin:"normal",placeholder:"Capy Bara",InputProps:{startAdornment:e.jsx(O,{position:"start",children:e.jsx(U,{sx:{color:"#4ECDC4"}})})},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(78, 205, 196, 0.3)"},"&:hover fieldset":{borderColor:"rgba(78, 205, 196, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#4ECDC4"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"},"& .MuiOutlinedInput-input":{color:"rgba(255, 255, 255, 0.9)"}}}),l&&e.jsx(se,{in:!0,children:e.jsx(Ie,{severity:w?"info":"error",sx:{my:2,bgcolor:w?"rgba(78, 205, 196, 0.1)":"rgba(255, 107, 107, 0.1)",color:w?"#4ECDC4":"#FF6B6B",border:`1px solid ${w?"#4ECDC4":"#FF6B6B"}`,"& .MuiAlert-icon":{color:w?"#4ECDC4":"#FF6B6B"}},children:l})}),e.jsxs(n,{sx:{display:"flex",gap:2,mt:4},children:[e.jsx(W,{variant:"outlined",onClick:u,fullWidth:!0,sx:{borderColor:"#4ECDC4",color:"#4ECDC4","&:hover":{borderColor:"#3dbdb5",bgcolor:"rgba(77, 205, 196, 0.1)"}},children:"Отмена"}),e.jsx(W,{type:"submit",variant:"contained",fullWidth:!0,disabled:D,sx:{bgcolor:"#4ECDC4",color:"#1a1a1a",fontWeight:"bold","&:hover":{bgcolor:"#3dbdb5"},"&:disabled":{bgcolor:"rgba(78, 205, 196, 0.3)",color:"rgba(255, 255, 255, 0.3)"}},children:D?"Обработка...":"Оплатить"})]})]}),e.jsxs(a,{variant:"body2",sx:{mt:3,textAlign:"center",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(oe,{sx:{fontSize:"1rem",color:"#4ECDC4"}}),"Безопасная оплата через КапиБанк"]})]})})})}const Jt=[{title:"Лунный календарь «Циклы света»",description:"Планируйте дела по фазам Луны и Солнца в удобном PDF. Получите доступ к древней астрологической мудрости в современном формате для гармоничной жизни в потоке космических энергий.",image:"/static/service1.png",price:"1 астролапка",features:["Ежедневные астрологические рекомендации","Инфографика‑календарь с указанием фаз луны","Советы по ритуалам в каждой фазе"]},{title:"Премиум‑карта «Звёздный навигатор»",description:"Полный астрологический анализ на год вперёд с дополнительными опциями для максимального погружения. Раскройте потенциал своей судьбы с помощью древних знаний.",image:"/static/service2.png",price:"5 астролапок",features:["Натальная карта + транзиты планет","Углублённый отчёт в подарочном буклете","Видеоразбор от астролога-эксперта"]},{title:"Экспедиция «Врата Созвездий»",description:"Личный астролог отправится в древнее место силы в предгорьях Капибаревской Сопки, где проведёт многодневный ритуал очищения вашей кармы в период максимальной активности вашего зодиакального созвездия.",image:"/static/service3.png",price:"25 астролапок",features:["4 дня ритуалов в местах пересечения лей-линий звёздных энергий Капибаревской Сопки","Создание персонального оберега из горного хрусталя в час силы*"],footnote:"*Доставка оберега оплачивается отдельно"}],Qt=["Первая услуга бесплатно!","Личный астролог подберёт благоприятные даты","Дипломированные астрологи с многолетним опытом","Сакральные знания древней астрологии","Все услуги в гармонии с движением планет"],Zt="/api";function er({onStartConsultation:h,credits:u,hasUsedFreeCredit:y,onCreditsUpdate:x,totalAvailableHours:i,userInfo:l}){const[c,D]=o.useState(null),[E,w]=o.useState(0),[$,b]=o.useState(!1),[_,g]=o.useState(null),[q,C]=o.useState(!1),[I,k]=o.useState(!1),[v,V]=o.useState(i);o.useEffect(()=>{if(l!=null&&l.email)if(i!==null){V(i);const s=setTimeout(()=>{k(!0)},2e3);return()=>clearTimeout(s)}else(async()=>{try{const d=await fetch(`${Zt}/astrologers`,{credentials:"include"});if(d.ok){const R=await d.json();if(R.success&&R.astrologers){const z=R.astrologers.reduce((m,Y)=>{const Q=Y.availableHours-Y.bookedHours;return m+Math.max(0,Q)},0);V(z),setTimeout(()=>{k(!0)},2e3)}}}catch(d){console.error("Error fetching astrologers:",d)}})();else k(!1)},[i,l]);const H=()=>{const s=E+1;w(s),s===7&&C(!0)},N=(s,d)=>{d!=="clickaway"&&C(!1)},S=s=>{g(s),b(!0)},K=()=>{_&&x&&x(u+_.amount),b(!1),g(null)},X=()=>{b(!1),g(null)},J=s=>s===0?"часов":s===1?"час":s>1&&s<5?"часа":"часов";return $?e.jsx(Xt,{selectedPackage:_,onSuccess:K,onCancel:X}):e.jsxs(n,{sx:{bgcolor:"#1a1a1a",minHeight:"100vh",color:"white",position:"relative"},children:[e.jsx(at,{open:q,autoHideDuration:6e3,onClose:N,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(Ie,{onClose:N,severity:"success",variant:"filled",sx:{width:"100%",bgcolor:"#4ECDC4","& .MuiAlert-icon":{color:"white"},"& .MuiAlert-message":{color:"white",fontSize:"1.1rem"}},children:e.jsxs(n,{sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h6",component:"div",sx:{mb:1},children:"🌟 Поздравляем! Вы нашли секретную капибару! 🌟"}),e.jsx(a,{children:"Вам будет доступен бесплатный астрологический прогноз при первом обращении к нашим мастерам!"})]})})}),e.jsx(se,{in:I&&(l==null?void 0:l.email),timeout:800,children:e.jsx(n,{sx:{position:"fixed",bottom:30,left:30,zIndex:1e3,maxWidth:360,animation:v===0?"pulse 1.5s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"100%":{transform:"scale(1)"}},cursor:"pointer"},onClick:h,children:e.jsx(L,{elevation:8,sx:{borderRadius:2,overflow:"hidden",background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",boxShadow:"0 4px 20px rgba(0,0,0,0.25)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 8px 30px rgba(0,0,0,0.3)",background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",backgroundSize:"200% 200%",animation:"gradientShift 2s ease infinite"},"@keyframes gradientShift":{"0%":{backgroundPosition:"0% 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0% 50%"}}},children:e.jsxs(n,{sx:{p:2.5,display:"flex",alignItems:"center",gap:2},children:[e.jsx(pe,{sx:{fontSize:36,color:"white",animation:v===0?"spin 3s linear infinite":"pulse 2s ease-in-out infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},"@keyframes pulse":{"0%":{opacity:.7},"50%":{opacity:1},"100%":{opacity:.7}}}}),e.jsxs(n,{children:[e.jsx(a,{variant:"h6",sx:{fontWeight:"bold",color:"white",textShadow:"0 1px 2px rgba(0,0,0,0.2)",lineHeight:1.2},children:v===0?"Консультации закончились!":`Осталось всего ${v} ${J(v)} доступных для бронирования!`}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)",mt:.5},children:v===0?"Запишитесь в лист ожидания сейчас":"Успейте забронировать встречу с астрологом"})]})]})})})}),e.jsxs(n,{sx:{background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",py:2,px:4,display:"flex",justifyContent:"center",alignItems:"center",gap:2},children:[e.jsx(Ae,{}),e.jsx(a,{variant:"h6",sx:{fontWeight:500},children:y?`У вас ${u} астролапка(ок) для консультаций`:"Первая консультация бесплатно! Начните свой духовный путь прямо сейчас"})]}),e.jsx(n,{sx:{background:"linear-gradient(135deg, #2a0845 0%, #6441A5 100%)",color:"white",height:"calc(100vh - 56px)",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",textAlign:"center"},children:e.jsxs(A,{maxWidth:"lg",children:[e.jsx(a,{variant:"h1",component:"h1",gutterBottom:!0,sx:{fontSize:{xs:"2.5rem",md:"4rem"},fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.3)",mb:4},children:"Астрология и Древние Практики"}),e.jsx(a,{variant:"h5",sx:{mb:6,opacity:.9,maxWidth:"800px",margin:"0 auto",lineHeight:1.5},children:"Откройте врата в мир древних знаний с опытными астрологами. Доверьтесь мудрости веков для преображения вашей судьбы."}),e.jsx(W,{variant:"contained",size:"large",onClick:h,sx:{bgcolor:"rgba(255,255,255,0.9)",color:"#2a0845",fontSize:"1.2rem",py:2,px:6,mt:4,borderRadius:"50px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",position:"relative",zIndex:2,"&:hover":{bgcolor:"white",transform:"scale(1.05) translateY(-2px)",transition:"all 0.3s ease",boxShadow:"0 6px 25px rgba(0,0,0,0.2)"}},children:"Начать Свой Путь"}),e.jsx(P,{title:"Погладь капибару на удачу!",placement:"top",children:e.jsx(U,{sx:{position:"absolute",bottom:20,right:20,fontSize:"2rem",cursor:"pointer",opacity:.7,"&:hover":{opacity:1,transform:"rotate(360deg)",transition:"all 0.5s ease"}},onClick:H})}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mt:4,bgcolor:"rgba(255,255,255,0.1)",borderRadius:3,p:2,maxWidth:"fit-content",margin:"2rem auto"},children:[e.jsx(nt,{badgeContent:u,color:"primary",children:e.jsx(ue,{sx:{fontSize:"2rem"}})}),e.jsx(a,{children:y?`У вас осталось ${u} астролапка(ок)`:"У вас есть бесплатная астролапка для первой консультации!"})]})]})}),e.jsxs(A,{sx:{py:12},children:[e.jsx(a,{variant:"h2",component:"h2",textAlign:"center",gutterBottom:!0,sx:{mb:8,position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",display:"block",fontWeight:"bold",fontSize:{xs:"2rem",md:"3rem"},textAlign:"center",letterSpacing:"0.02em",WebkitTextFillColor:"transparent"}},children:"Наши Услуги"}),e.jsx(M,{container:!0,spacing:6,children:Jt.map((s,d)=>e.jsx(M,{item:!0,xs:12,md:4,sx:{display:"flex","& > *":{flex:1}},children:e.jsxs(it,{sx:{height:"100%",display:"flex",flexDirection:"column",bgcolor:"rgba(255,255,255,0.05)",backdropFilter:"blur(10px)",position:"relative",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",borderRadius:2,transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",bgcolor:"rgba(255,255,255,0.05)"}},children:[e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(lt,{component:"img",height:"300",image:s.image,alt:s.title,sx:{filter:"brightness(0.8)",objectFit:"cover",width:"100%",height:"300px",borderRadius:"8px 8px 0 0"}}),e.jsx(n,{sx:{position:"absolute",bottom:0,left:0,right:0,height:"100%",background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0) 50%)",borderRadius:"8px 8px 0 0"}})]}),e.jsxs(ct,{sx:{color:"white",flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs(n,{children:[e.jsx(a,{variant:"h5",component:"h3",gutterBottom:!0,sx:{color:"#4ECDC4",fontSize:"1.5rem"},children:s.title}),e.jsx(a,{variant:"body1",sx:{mb:2,color:"rgba(255,255,255,0.8)",fontSize:"1.1rem",lineHeight:1.5},children:s.description}),e.jsx(we,{sx:{mb:2,pl:0},children:s.features&&s.features.map((R,z)=>e.jsxs(_e,{sx:{py:.5,px:0},children:[e.jsx(Me,{sx:{minWidth:"30px"},children:e.jsx(re,{fontSize:"small",sx:{color:"#FF6B6B"}})}),e.jsx(ee,{primary:R,sx:{"& .MuiTypography-root":{fontSize:"1rem",color:"rgba(255,255,255,0.9)",lineHeight:1.4}}})]},z))}),s.footnote&&e.jsx(a,{variant:"caption",sx:{display:"block",mt:1,fontStyle:"italic",color:"rgba(255,255,255,0.6)",fontSize:"0.75rem"},children:s.footnote})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,mt:"auto"},children:[e.jsx(a,{variant:"h6",sx:{color:"#FF6B6B",textDecoration:d===0?"line-through":"none",opacity:d===0?.7:1},children:s.price}),d===0?e.jsx(a,{variant:"h6",sx:{color:"#4ECDC4",fontWeight:"bold"},children:"БЕСПЛАТНО!"}):null]})]})]})},d))}),e.jsxs(L,{sx:{mt:8,p:4,bgcolor:"rgba(255,255,255,0.05)",borderRadius:4,backdropFilter:"blur(10px)",textAlign:"center"},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,sx:{color:"#4ECDC4"},children:"Приобретите Астролапки для Услуг"}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.8)",mb:3},children:"Инвестируйте в свою судьбу с помощью опытных астрологов и древних практик"}),e.jsx(M,{container:!0,spacing:3,justifyContent:"center",children:[{amount:1,price:"5000₡",discount:"Пробный пакет"},{amount:5,price:"20000₡",discount:"15% выгода"},{amount:25,price:"75000₡",discount:"40% выгода"}].map((s,d)=>e.jsx(M,{item:!0,xs:12,sm:4,sx:{display:"flex"},children:e.jsxs(L,{sx:{p:3,bgcolor:"rgba(255,255,255,0.03)",transition:"all 0.3s ease",display:"flex",flexDirection:"column",width:"100%",height:"100%","&:hover":{transform:"scale(1.05)",bgcolor:"rgba(255,255,255,0.05)"}},children:[e.jsxs(n,{sx:{flex:1},children:[e.jsxs(a,{variant:"h5",sx:{color:"#4ECDC4",mb:1},children:[s.amount," ",s.amount>=5?"Астролапок":"Астролапки"]}),e.jsx(a,{variant:"h6",sx:{color:"#FF6B6B"},children:s.price}),e.jsxs(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.6)"},children:["Скидка ",s.discount]})]}),e.jsx(W,{variant:"contained",fullWidth:!0,onClick:()=>S(s),sx:{mt:2,bgcolor:"#4ECDC4","&:hover":{bgcolor:"#3dbdb5"}},children:"Купить"})]})},d))})]})]}),e.jsx(n,{sx:{bgcolor:"rgba(255,255,255,0.02)",py:12},children:e.jsxs(A,{children:[e.jsx(a,{variant:"h3",component:"h2",textAlign:"center",gutterBottom:!0,sx:{mb:8,background:"linear-gradient(45deg, #4ECDC4, #FF6B6B)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"Почему Мы"}),e.jsxs(M,{container:!0,spacing:6,children:[e.jsx(M,{item:!0,xs:12,md:6,children:e.jsx(we,{children:Qt.map((s,d)=>e.jsxs(_e,{sx:{mb:2,bgcolor:"rgba(255,255,255,0.03)",borderRadius:2,transition:"all 0.3s ease","&:hover":{bgcolor:"rgba(255,255,255,0.05)",transform:"translateX(10px)"}},children:[e.jsx(Me,{children:e.jsx(re,{sx:{color:"#4ECDC4"}})}),e.jsx(ee,{primary:s,sx:{"& .MuiTypography-root":{color:"rgba(255,255,255,0.9)"}}})]},d))})}),e.jsx(M,{item:!0,xs:12,md:6,children:e.jsxs(n,{sx:{p:4,bgcolor:"rgba(255,255,255,0.03)",borderRadius:4,backdropFilter:"blur(10px)"},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,sx:{color:"#4ECDC4"},children:"Начните Сегодня"}),e.jsx(a,{paragraph:!0,sx:{color:"rgba(255,255,255,0.8)"},children:"Наши опытные астрологи готовы применить древние знания, чтобы открыть для вас новые пути и возможности в потоке космических энергий."}),e.jsx(W,{variant:"contained",size:"large",onClick:h,sx:{bgcolor:"#4ECDC4","&:hover":{bgcolor:"#3dbdb5"}},children:"Записаться к Астрологу"})]})})]})]})}),e.jsx(A,{sx:{py:12},children:e.jsx(M,{container:!0,spacing:6,children:[{icon:e.jsx(Re,{sx:{fontSize:60,color:"#4ECDC4"}}),title:"Опытные Астрологи",description:"Наши мастера совмещают классическую астрологию с древними практиками."},{icon:e.jsx(Be,{sx:{fontSize:60,color:"#4ECDC4"}}),title:"Астрологическое Время",description:"Все услуги проводятся в моменты максимальной силы планет."},{icon:e.jsx(Pe,{sx:{fontSize:60,color:"#4ECDC4"}}),title:"Индивидуальный Подход",description:"Каждая услуга основана на вашей личной натальной карте."}].map((s,d)=>e.jsx(M,{item:!0,xs:12,md:4,sx:{display:"flex","& > *":{flex:1}},children:e.jsxs(n,{sx:{textAlign:"center",p:3,bgcolor:"rgba(255,255,255,0.03)",borderRadius:4,transition:"all 0.3s ease",display:"flex",flexDirection:"column",alignItems:"center",height:"100%","&:hover":{transform:"translateY(-10px)",bgcolor:"rgba(255,255,255,0.05)"}},children:[e.jsx(n,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:s.icon}),e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{color:"#4ECDC4",mt:2},children:s.title}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.8)",flex:1},children:s.description})]})},d))})})]})}var ve={},tr=p;Object.defineProperty(ve,"__esModule",{value:!0});var Fe=ve.default=void 0,rr=tr(f()),or=e;Fe=ve.default=(0,rr.default)((0,or.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var je={},sr=p;Object.defineProperty(je,"__esModule",{value:!0});var Oe=je.default=void 0,ar=sr(f()),De=e;Oe=je.default=(0,ar.default)([(0,De.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,De.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");const nr=[{text:"Читает карту небесных тел",emoji:"🌚"},{text:"Разгадывает послания небес",emoji:"✨"},{text:"Советуется с планетами",emoji:"🌍"},{text:"Сверяется с гороскопом",emoji:"🔮"},{text:"Вслушивается в эхо глубин",emoji:"🌊"}],ir=`
  @keyframes loadingDots {
    0% { content: '.'; }
    33% { content: '..'; }
    66% { content: '...'; }
    100% { content: '.'; }
  }
  .loading-dots::after {
    content: '.';
    animation: loadingDots 1.5s infinite;
    display: inline-block;
    width: 24px;
    text-align: left;
  }
  @keyframes fadeInOut {
    0% { opacity: 0; }
    20% { opacity: 1; }
    80% { opacity: 1; }
    100% { opacity: 0; }
  }
  .loading-message {
    animation: fadeInOut 3s ease-in-out;
  }
`,lr=dt({palette:{mode:"dark",primary:{main:"#4ECDC4"},background:{default:"#1a1a1a",paper:"#2a2a2a"}},typography:{fontFamily:'"Roboto", "Arial", sans-serif'},components:{MuiButton:{styleOverrides:{root:{borderRadius:"50px",textTransform:"none"}}}}}),B="/api";function cr(){const[h,u]=o.useState([]),[y,x]=o.useState(""),[i,l]=o.useState(!1),[c,D]=o.useState(!1),[E,w]=o.useState(0),[$,b]=o.useState(!1),[_,g]=o.useState(""),[q,C]=o.useState(0),[I,k]=o.useState(0),[v,V]=o.useState([]),[H,N]=o.useState([]),[S,K]=o.useState(null),[X,J]=o.useState(""),[s,d]=o.useState(null),[R,z]=o.useState(null),[m,Y]=o.useState(null),[Q,ye]=o.useState(!1),Te=o.useRef(null),[dr,We]=o.useState(0),qe=()=>{var t;(t=Te.current)==null||t.scrollIntoView({behavior:"smooth"})},Ce=()=>{We(t=>t+1)};o.useEffect(()=>{$&&!i&&Ce()},[$,i]),o.useEffect(()=>{qe()},[h]),o.useEffect(()=>{c&&(console.log("Initial session check on chat open"),Ke(),Ye())},[c]),o.useEffect(()=>{c&&Ne()},[c]),o.useEffect(()=>{let t;return i&&(t=setInterval(()=>{C(r=>(r+1)%nr.length)},3e3)),()=>{t&&clearInterval(t)}},[i]),o.useEffect(()=>{if(H.length>0){const t=H.reduce((r,j)=>{const tt=j.availableHours-j.bookedHours;return r+tt},0);K(t),t===0&&!X&&Ve()}},[H]),o.useEffect(()=>{c&&Se()},[c]);const Ve=async()=>{try{const t=await fetch(`${B}/flag`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch flag");const r=await t.json();r.success&&r.flag&&(J(r.flag),u(j=>[...j,{text:r.flag,sender:"bot",special:!0}]))}catch(t){console.error("Error fetching flag:",t)}},Ne=async()=>{try{console.log("Loading chat history...");const t=await fetch(`${B}/chat/history`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const r=await t.json();r.success&&r.history&&r.history.length>0?(console.log("Chat history loaded:",r.history.length,"messages"),u(r.history)):console.log("No chat history found or empty history")}catch(t){console.error("Error loading chat history:",t)}},Ye=async()=>{try{const t=await fetch(`${B}/user/balance`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const r=await t.json();r.success&&k(r.balance)}catch(t){console.error("Error loading user balance:",t)}},Ge=async()=>{try{const t=await fetch(`${B}/bookings`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const r=await t.json();r.success&&V(r.bookings||[])}catch(t){console.error("Error loading user bookings:",t)}},Se=async()=>{try{const t=await fetch(`${B}/astrologers`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const r=await t.json();r.success&&N(r.astrologers||[])}catch(t){console.error("Error loading astrologers:",t)}},Ue=()=>{w(t=>{const r=t+1;return r===5&&u(j=>[...j,{text:"🌟 Капибара шепчет: 'Запишитесь на консультацию и узнайте все о своей судьбе!' 🌟",sender:"bot",special:!0}]),r})},Ke=async()=>{try{console.log("Checking session status...");const t=await fetch(`${B}/session/status`,{credentials:"include"});if(!t.ok)throw new Error("Network response was not ok");const r=await t.json();return b(r.ready),r.userInfo&&Y(r.userInfo),r.message&&r.message!==_&&(g(r.message),(h.length===0||r.message!==_&&!h.some(j=>j.sender==="bot"&&j.text===r.message))&&u(j=>[...j,{text:r.message,sender:"bot",special:r.message.includes("tctf{")}])),r.ready&&Ce(),r}catch(t){return console.error("Error checking session status:",t),_!=="Ошибка при проверке статуса сессии"&&(g("Ошибка при проверке статуса сессии"),(h.length===0||!h.some(r=>r.text==="Ошибка при проверке статуса сессии"))&&u(r=>[...r,{text:"Ошибка при проверке статуса сессии",sender:"bot",special:!1}])),null}},Xe=()=>{D(!0)},Je=t=>{Ge(),d(t.currentTarget)},Qe=()=>{d(null)},Ze=t=>{Se(),z(t.currentTarget)};o.useEffect(()=>{if(c&&(m!=null&&m.email)&&S!==null){const t=setTimeout(()=>{ye(!0)},2e3);return()=>clearTimeout(t)}else ye(!1)},[c,m==null?void 0:m.email,S]);const et=t=>t===0?"часов":t===1?"час":t>1&&t<5?"часа":"часов";return e.jsxs(ut,{theme:lr,children:[e.jsx("style",{children:ir}),c?e.jsxs(n,{sx:{minHeight:"100vh",width:"100%",background:"linear-gradient(135deg, #2a0845 0%, #6441A5 100%)",padding:0,margin:0,display:"flex"},children:[e.jsx(se,{in:Q&&(m==null?void 0:m.email),timeout:800,children:e.jsx(n,{sx:{position:"fixed",bottom:30,left:30,zIndex:1e3,maxWidth:320,animation:S===0?"pulse 1.5s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"100%":{transform:"scale(1)"}},cursor:"pointer"},children:e.jsx(L,{elevation:8,sx:{borderRadius:2,overflow:"hidden",background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",boxShadow:"0 4px 20px rgba(0,0,0,0.25)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 8px 30px rgba(0,0,0,0.3)"}},children:e.jsxs(n,{sx:{p:2,display:"flex",alignItems:"center",gap:2},children:[e.jsx(pe,{sx:{fontSize:32,color:"white",animation:S===0?"spin 3s linear infinite":"pulse 2s ease-in-out infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},"@keyframes pulse":{"0%":{opacity:.7},"50%":{opacity:1},"100%":{opacity:.7}}}}),e.jsx(n,{children:e.jsx(a,{variant:"body1",sx:{fontWeight:"bold",color:"white",textShadow:"0 1px 2px rgba(0,0,0,0.2)",lineHeight:1.2},children:S===0?"Консультации закончились!":`Осталось всего ${S} ${et(S)} для бронирования!`})})]})})})}),e.jsx(A,{maxWidth:"md",sx:{height:"100vh",display:"flex",flexDirection:"column",py:4},children:e.jsxs(L,{elevation:3,sx:{flexGrow:1,display:"flex",flexDirection:"column",bgcolor:"background.paper",borderRadius:4,overflow:"hidden"},children:[e.jsxs(n,{sx:{p:2,borderBottom:1,borderColor:"divider",background:"linear-gradient(135deg, #2a0845 0%, #6441A5 100%)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(a,{variant:"h5",sx:{fontWeight:500},children:"Ваша Духовная Консультация"}),e.jsx(n,{sx:{display:"flex",alignItems:"center",bgcolor:"rgba(255, 255, 255, 0.1)",px:1,py:0,borderRadius:2,gap:1},children:e.jsx(P,{title:"Баланс астролапок",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{variant:"body1",children:I}),e.jsx("img",{src:"/static/lapka.png",alt:"Астролапка",style:{width:32,height:32,objectFit:"contain",margin:0,padding:0}})]})})})]}),e.jsxs(n,{children:[e.jsx(P,{title:"Погладить капибару",children:e.jsx(G,{color:"inherit",onClick:Ue,sx:{mr:1},children:e.jsx(U,{})})}),e.jsx(P,{title:"Вернуться на главную",children:e.jsx(G,{color:"inherit",onClick:()=>D(!1),children:e.jsx(Fe,{})})}),e.jsx(P,{title:"Мои бронирования",children:e.jsx(G,{color:"inherit",onClick:Je,children:e.jsx(ue,{})})}),e.jsx(P,{title:"Доступность астрологов",children:e.jsx(G,{color:"inherit",onClick:Ze,children:e.jsx(Oe,{})})})]})]}),e.jsxs(xt,{anchorEl:s,open:!!s,onClose:Qe,PaperProps:{sx:{mt:1.5,width:280,maxHeight:300,overflow:"auto"}},children:[e.jsx(a,{sx:{p:1.5,fontWeight:"bold"},children:"Мои бронирования"}),v.length===0?e.jsx(ke,{disabled:!0,children:"У вас пока нет забронированных консультаций"}):v.map(t=>e.jsx(ke,{sx:{whiteSpace:"normal"},children:e.jsx(ee,{primary:`${t.serviceName}`,secondary:`Астролог: ${t.astrologerName}`})},`${t.serviceId}-${t.astrologerId}`))]})]})})]}):e.jsx(er,{onStartConsultation:Xe,totalAvailableHours:S,userInfo:m})]})}te.createRoot(document.getElementById("root")).render(e.jsx(ht.StrictMode,{children:e.jsx(cr,{})}));
